<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Franco's Git Page</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <div id="file-directory">
      <h1>Directory Loading...</h1>
      <script>
        (async () => {
          var myRepos = 'https://api.github.com/repos/Franco-Henriquez/franco-henriquez.github.io/contents/'
          var location = window.location.pathname;
          var path = location.substring(0, location.lastIndexOf("/"));
          var directoryName = path.substring(path.lastIndexOf("/")+1); /*current working directory*/
          var myRepos = myRepos + directoryName 
          const response = await fetch(myRepos);
          const data = await response.json();
          
          let htmlString = '<h1>Directory Listing for folder: ' + directoryName +'</h1>';
          htmlString += '<ul>';
          
          for (let file of data) {
            if (file.name != 'index.html' && file.name != '.gitignore' && file.name != 'style.css') {
            htmlString += `<li>&#x1F4C2;<a href="${path}/${file.name}/">${file.name}</a></li>`;
            }
          }

          htmlString += '</ul>';
          document.getElementById('file-directory').innerHTML = htmlString;
        
        })()
      </script>
    </div>

</body>
</html>